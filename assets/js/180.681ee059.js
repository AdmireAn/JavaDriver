(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{683:function(t,r,n){"use strict";n.r(r);var s=n(21),a=Object(s.a)({},(function(){var t=this,r=t.$createElement,n=t._self._c||r;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"主题和分区"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主题和分区"}},[t._v("#")]),t._v(" 主题和分区")]),t._v(" "),n("p",[t._v("kafka通过主题对消息分类。\nkafka通过分区实现数据冗余和伸缩性。\n一个主题包含多个分区，所以在topic内消息可能是无需的，但是在单个partition内部是有序的。\n"),n("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA2dE5iUndseTFnOWwxaXh0cXJ3ajMweXEwYnN0aTkuanBn?x-oss-process=image/format,png",alt:""}})]),t._v(" "),n("h1",{attrs:{id:"生产者和消费者"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生产者和消费者"}},[t._v("#")]),t._v(" 生产者和消费者")]),t._v(" "),n("p",[n("strong",[t._v("生产者")]),t._v("创建消息，发布到一个特定的主题上，消息会均衡在所有分区上。\n"),n("strong",[t._v("消费者")]),t._v("订阅一个或者多个主题，按照生产顺序消费消息。\n"),n("strong",[t._v("偏移量")]),t._v("是一种元数据，是一个不断递增的整数值，消费者通过偏移量来区分已经消费的消息。每个分区有唯一的偏移量，消费者把最后消费的消息的偏移量发送到broker或者zookeeper保存。\n"),n("strong",[t._v("消费者群组")]),t._v("多个消费者共同读取一个主题，有唯一的groupId,群组保证，每个分区只能被一个消费者使用。\n"),n("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA2dE5iUndseTFnOWwxc2swejBqajMwejIwZXdhbzkuanBn?x-oss-process=image/format,png",alt:""}})]),t._v(" "),n("h1",{attrs:{id:"broker和集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#broker和集群"}},[t._v("#")]),t._v(" broker和集群")]),t._v(" "),n("p",[n("strong",[t._v("broker")]),t._v("是一个独立的kafka 服务器。负责接收生产者的消息，为消息设置偏移量，提交消息到磁盘保存。是集群的组成部分。\n"),n("strong",[t._v("集群控制器")]),t._v("是集群中的一个broker。负责分区分配和broker监控。\n"),n("strong",[t._v("分区首领")]),t._v("。一个分区会分配给多个broker，这种复制机制是为了提供消息冗余。在这多个broker中需要有一个分区首领，消费者只消费分区首领的消息，分区首领负责把消费的offset同步到冗余分区中。\n"),n("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA2dE5iUndseTFnOWwxejE3bDVpajMwemMwamM3aGIuanBn?x-oss-process=image/format,png",alt:""}})])])}),[],!1,null,null,null);r.default=a.exports}}]);