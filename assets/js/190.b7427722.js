(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{691:function(t,e,r){"use strict";r.r(e);var _=r(21),v=Object(_.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"ä½¿ç”¨åœºæ™¯-scenario"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨åœºæ™¯-scenario"}},[t._v("#")]),t._v(" ä½¿ç”¨åœºæ™¯(Scenario)")]),t._v(" "),r("p",[t._v("å¾®åšå’ŒTwitteréƒ½æœ‰140å­—æ•°çš„é™åˆ¶ï¼Œå¦‚æœåˆ†äº«ä¸€ä¸ªé•¿ç½‘å€ï¼Œå¾ˆå®¹æ˜“å°±è¶…å‡ºé™åˆ¶ï¼Œå‘å¸ƒå‡ºå»ã€‚çŸ­ç½‘å€æœåŠ¡å¯ä»¥æŠŠä¸€ä¸ªé•¿ç½‘å€å˜æˆçŸ­ç½‘å€ï¼Œæ–¹ä¾¿åœ¨ç¤¾äº¤ç½‘ç»œä¸Šä¼ æ’­ã€‚")]),t._v(" "),r("h2",{attrs:{id:"éœ€æ±‚-needs"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#éœ€æ±‚-needs"}},[t._v("#")]),t._v(" éœ€æ±‚(Needs)")]),t._v(" "),r("p",[t._v("å¾ˆæ˜¾ç„¶ï¼Œè¦å°½å¯èƒ½çš„"),r("strong",[t._v("çŸ­")]),t._v("ã€‚é•¿åº¦è®¾è®¡ä¸ºå¤šå°‘æ‰åˆé€‚å‘¢ï¼Ÿ")]),t._v(" "),r("h2",{attrs:{id:"çŸ­ç½‘å€çš„é•¿åº¦"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#çŸ­ç½‘å€çš„é•¿åº¦"}},[t._v("#")]),t._v(" çŸ­ç½‘å€çš„é•¿åº¦")]),t._v(" "),r("p",[t._v("å½“å‰äº’è”ç½‘ä¸Šçš„ç½‘é¡µæ€»æ•°å¤§æ¦‚æ˜¯ 45äº¿(å‚è€ƒ "),r("a",{attrs:{href:"http://www.worldwidewebsize.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.worldwidewebsize.com"),r("OutboundLink")],1),t._v(")ï¼Œ45äº¿è¶…è¿‡äº† 2^{32}=4294967296232=4294967296ï¼Œä½†è¿œè¿œå°äº64ä½æ•´æ•°çš„ä¸Šé™å€¼ï¼Œé‚£ä¹ˆç”¨ä¸€ä¸ª64ä½æ•´æ•°è¶³å¤Ÿäº†ã€‚")]),t._v(" "),r("p",[t._v("å¾®åšçš„çŸ­ç½‘å€æœåŠ¡ç”¨çš„æ˜¯é•¿åº¦ä¸º7çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥çœ‹åšæ˜¯62è¿›åˆ¶çš„æ•°ï¼Œé‚£ä¹ˆæœ€å¤§èƒ½è¡¨ç¤º{62}^7=3521614606208627=3521614606208ä¸ªç½‘å€ï¼Œè¿œè¿œå¤§äº45äº¿ã€‚æ‰€ä»¥"),r("strong",[t._v("é•¿åº¦ä¸º7å°±è¶³å¤Ÿäº†")]),t._v("ã€‚")]),t._v(" "),r("p",[t._v("ä¸€ä¸ª64ä½æ•´æ•°å¦‚ä½•è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å‘¢ï¼Ÿï¼Œå‡è®¾æˆ‘ä»¬åªæ˜¯ç”¨å¤§å°å†™å­—æ¯åŠ æ•°å­—ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹åšæ˜¯62è¿›åˆ¶æ•°ï¼Œlog_{62} {(2^{64}-1)}=10.7"),r("em",[t._v("l"),r("strong",[t._v("o")]),t._v("g")]),t._v("62(264âˆ’1)=10.7ï¼Œå³å­—ç¬¦ä¸²æœ€é•¿11å°±è¶³å¤Ÿäº†ã€‚")]),t._v(" "),r("p",[t._v("å®é™…ç”Ÿäº§ä¸­ï¼Œè¿˜å¯ä»¥å†çŸ­ä¸€ç‚¹ï¼Œæ¯”å¦‚æ–°æµªå¾®åšé‡‡ç”¨çš„é•¿åº¦å°±æ˜¯7ï¼Œå› ä¸º 62^7=3521614606208627=3521614606208ï¼Œè¿™ä¸ªé‡çº§è¿œè¿œè¶…è¿‡äº’è”ç½‘ä¸Šçš„URLæ€»æ•°äº†ï¼Œç»å¯¹å¤Ÿç”¨äº†ã€‚")]),t._v(" "),r("p",[t._v("ç°ä»£çš„webæœåŠ¡å™¨ï¼ˆä¾‹å¦‚Apache, Nginxï¼‰å¤§éƒ¨åˆ†éƒ½åŒºåˆ†URLé‡Œçš„å¤§å°å†™äº†ï¼Œæ‰€ä»¥ç”¨å¤§å°å†™å­—æ¯æ¥åŒºåˆ†ä¸åŒçš„URLæ˜¯æ²¡é—®é¢˜çš„ã€‚")]),t._v(" "),r("p",[t._v("å› æ­¤ï¼Œ"),r("strong",[t._v("æ­£ç¡®ç­”æ¡ˆï¼šé•¿åº¦ä¸è¶…è¿‡7çš„å­—ç¬¦ä¸²ï¼Œç”±å¤§å°å†™å­—æ¯åŠ æ•°å­—å…±62ä¸ªå­—æ¯ç»„æˆ")])]),t._v(" "),r("h2",{attrs:{id:"ä¸€å¯¹ä¸€è¿˜æ˜¯ä¸€å¯¹å¤šæ˜ å°„"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€å¯¹ä¸€è¿˜æ˜¯ä¸€å¯¹å¤šæ˜ å°„"}},[t._v("#")]),t._v(" ä¸€å¯¹ä¸€è¿˜æ˜¯ä¸€å¯¹å¤šæ˜ å°„ï¼Ÿ")]),t._v(" "),r("p",[t._v("ä¸€ä¸ªé•¿ç½‘å€ï¼Œå¯¹åº”ä¸€ä¸ªçŸ­ç½‘å€ï¼Œè¿˜æ˜¯å¯ä»¥å¯¹åº”å¤šä¸ªçŸ­ç½‘å€ï¼Ÿ è¿™ä¹Ÿæ˜¯ä¸ªé‡å¤§é€‰æ‹©é—®é¢˜")]),t._v(" "),r("p",[t._v("ä¸€èˆ¬è€Œè¨€ï¼Œä¸€ä¸ªé•¿ç½‘å€ï¼Œåœ¨ä¸åŒçš„åœ°ç‚¹ï¼Œä¸åŒçš„ç”¨æˆ·ç­‰æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„çŸ­ç½‘å€åº”è¯¥ä¸ä¸€æ ·ï¼Œè¿™æ ·ï¼Œåœ¨åç«¯æ•°æ®åº“ä¸­ï¼Œå¯ä»¥æ›´å¥½çš„è¿›è¡Œæ•°æ®åˆ†æã€‚å¦‚æœä¸€ä¸ªé•¿ç½‘å€ä¸ä¸€ä¸ªçŸ­ç½‘å€ä¸€ä¸€å¯¹åº”ï¼Œé‚£ä¹ˆåœ¨æ•°æ®åº“ä¸­ï¼Œä»…æœ‰ä¸€è¡Œæ•°æ®ï¼Œæ— æ³•åŒºåˆ†ä¸åŒçš„æ¥æºï¼Œå°±æ— æ³•åšæ•°æ®åˆ†æäº†ã€‚")]),t._v(" "),r("p",[t._v("ä»¥è¿™ä¸ª7ä½é•¿åº¦çš„çŸ­ç½‘å€ä½œä¸ºå”¯ä¸€IDï¼Œè¿™ä¸ªIDä¸‹å¯ä»¥æŒ‚å„ç§ä¿¡æ¯ï¼Œæ¯”å¦‚ç”Ÿæˆè¯¥ç½‘å€çš„ç”¨æˆ·åï¼Œæ‰€åœ¨ç½‘ç«™ï¼ŒHTTPå¤´éƒ¨çš„ User Agentç­‰ä¿¡æ¯ï¼Œæ”¶é›†äº†è¿™äº›ä¿¡æ¯ï¼Œæ‰æœ‰å¯èƒ½åœ¨åé¢åšå¤§æ•°æ®åˆ†æï¼ŒæŒ–æ˜æ•°æ®çš„ä»·å€¼ã€‚çŸ­ç½‘å€æœåŠ¡å•†çš„ä¸€å¤§ç›ˆåˆ©æ¥æºå°±æ˜¯è¿™äº›æ•°æ®ã€‚")]),t._v(" "),r("p",[r("strong",[t._v("æ­£ç¡®ç­”æ¡ˆï¼šä¸€å¯¹å¤š")])]),t._v(" "),r("h2",{attrs:{id:"å¦‚ä½•è®¡ç®—çŸ­ç½‘å€"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•è®¡ç®—çŸ­ç½‘å€"}},[t._v("#")]),t._v(" å¦‚ä½•è®¡ç®—çŸ­ç½‘å€")]),t._v(" "),r("p",[t._v("ç°åœ¨æˆ‘ä»¬è®¾å®šäº†çŸ­ç½‘å€æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º7çš„å­—ç¬¦ä¸²ï¼Œå¦‚ä½•è®¡ç®—å¾—åˆ°è¿™ä¸ªçŸ­ç½‘å€å‘¢ï¼Ÿ")]),t._v(" "),r("p",[t._v("æœ€å®¹æ˜“æƒ³åˆ°çš„åŠæ³•æ˜¯å“ˆå¸Œï¼Œå…ˆhashå¾—åˆ°ä¸€ä¸ª64ä½æ•´æ•°ï¼Œå°†å®ƒè½¬åŒ–ä¸º62è¿›åˆ¶æ•´ï¼Œæˆªå–ä½7ä½å³å¯ã€‚ä½†æ˜¯å“ˆå¸Œç®—æ³•ä¼šæœ‰å†²çªï¼Œå¦‚ä½•å¤„ç†å†²çªå‘¢ï¼Œåˆæ˜¯ä¸€ä¸ªéº»çƒ¦ã€‚è¿™ä¸ªæ–¹æ³•åªæ˜¯è½¬ç§»äº†çŸ›ç›¾ï¼Œæ²¡æœ‰è§£å†³çŸ›ç›¾ï¼ŒæŠ›å¼ƒã€‚")]),t._v(" "),r("p",[r("strong",[t._v("æ­£ç¡®ç­”æ¡ˆï¼š"),r("a",{attrs:{href:"https://soulmachine.gitbooks.io/system-design/content/cn/distributed-id-generator.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("åˆ†å¸ƒå¼å‘å·å™¨(Distributed ID Generator)"),r("OutboundLink")],1)])]),t._v(" "),r("h2",{attrs:{id:"å¦‚ä½•å­˜å‚¨"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•å­˜å‚¨"}},[t._v("#")]),t._v(" å¦‚ä½•å­˜å‚¨")]),t._v(" "),r("p",[t._v("å¦‚æœå­˜å‚¨çŸ­ç½‘å€å’Œé•¿ç½‘å€çš„å¯¹åº”å…³ç³»ï¼Ÿä»¥çŸ­ç½‘å€ä¸º primary key, é•¿ç½‘å€ä¸ºvalue, å¯ä»¥ç”¨ä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“å­˜èµ·æ¥ï¼Œä¾‹å¦‚MySQL, PostgreSQLï¼Œä¹Ÿå¯ä»¥ç”¨ä»»æ„ä¸€ä¸ªåˆ†å¸ƒå¼KVæ•°æ®åº“ï¼Œä¾‹å¦‚Redis, LevelDBã€‚")]),t._v(" "),r("p",[t._v("å¦‚æœä½ æ‰‹ç—’æƒ³è¦æ‰‹å·¥è®¾è®¡è¿™ä¸ªå­˜å‚¨ï¼Œé‚£å°±æ˜¯å¦ä¸€ä¸ªè¯é¢˜äº†ï¼Œä½ éœ€è¦å®Œæ•´åœ°é€ ä¸€ä¸ªKVå­˜å‚¨å¼•æ“è½®å­ã€‚å½“å‰æµè¡Œçš„KVå­˜å‚¨å¼•æ“æœ‰LevelDBä½•RockDBï¼Œå»è¯»å®ƒä»¬çš„æºç å§ ğŸ˜„")]),t._v(" "),r("h2",{attrs:{id:"_301è¿˜æ˜¯302é‡å®šå‘"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_301è¿˜æ˜¯302é‡å®šå‘"}},[t._v("#")]),t._v(" 301è¿˜æ˜¯302é‡å®šå‘")]),t._v(" "),r("p",[t._v("è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜ä¸»è¦æ˜¯è€ƒå¯Ÿä½ å¯¹301å’Œ302çš„ç†è§£ï¼Œä»¥åŠæµè§ˆå™¨ç¼“å­˜æœºåˆ¶çš„ç†è§£ã€‚")]),t._v(" "),r("p",[t._v("301æ˜¯æ°¸ä¹…é‡å®šå‘ï¼Œ302æ˜¯ä¸´æ—¶é‡å®šå‘ã€‚çŸ­åœ°å€ä¸€ç»ç”Ÿæˆå°±ä¸ä¼šå˜åŒ–ï¼Œæ‰€ä»¥ç”¨301æ˜¯ç¬¦åˆhttpè¯­ä¹‰çš„ã€‚ä½†æ˜¯å¦‚æœç”¨äº†301ï¼Œ Googleï¼Œç™¾åº¦ç­‰æœç´¢å¼•æ“ï¼Œæœç´¢çš„æ—¶å€™ä¼šç›´æ¥å±•ç¤ºçœŸå®åœ°å€ï¼Œé‚£æˆ‘ä»¬å°±æ— æ³•ç»Ÿè®¡åˆ°çŸ­åœ°å€è¢«ç‚¹å‡»çš„æ¬¡æ•°äº†ï¼Œä¹Ÿæ— æ³•æ”¶é›†ç”¨æˆ·çš„Cookie, User Agent ç­‰ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥ç”¨æ¥åšå¾ˆå¤šæœ‰æ„æ€çš„å¤§æ•°æ®åˆ†æï¼Œä¹Ÿæ˜¯çŸ­ç½‘å€æœåŠ¡å•†çš„ä¸»è¦ç›ˆåˆ©æ¥æºã€‚")]),t._v(" "),r("p",[t._v("æ‰€ä»¥ï¼Œ"),r("strong",[t._v("æ­£ç¡®ç­”æ¡ˆæ˜¯302é‡å®šå‘")]),t._v("ã€‚")]),t._v(" "),r("p",[t._v("å¯ä»¥æŠ“åŒ…çœ‹çœ‹æ–°æµªå¾®åšçš„çŸ­ç½‘å€æ˜¯æ€ä¹ˆåšçš„ï¼Œä½¿ç”¨ Chrome æµè§ˆå™¨ï¼Œè®¿é—®è¿™ä¸ªURL http://t.cn/RX2VxjIï¼Œæ˜¯æˆ‘äº‹å…ˆå‘å¾®åšè‡ªåŠ¨ç”Ÿæˆçš„çŸ­ç½‘å€ã€‚æ¥æŠ“åŒ…çœ‹çœ‹è¿”å›çš„ç»“æœæ˜¯å•¥ï¼Œ")]),t._v(" "),r("p",[r("img",{attrs:{src:"http://cn.soulmachine.me/images/tinyurl-302.png",alt:"img"}})]),t._v(" "),r("p",[t._v("å¯è§æ–°æµªå¾®åšç”¨çš„å°±æ˜¯302ä¸´æ—¶é‡å®šå‘ã€‚")]),t._v(" "),r("h2",{attrs:{id:"é¢„é˜²æ”»å‡»"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#é¢„é˜²æ”»å‡»"}},[t._v("#")]),t._v(" é¢„é˜²æ”»å‡»")]),t._v(" "),r("p",[t._v("å¦‚æœä¸€äº›åˆ«æœ‰ç”¨å¿ƒçš„é»‘å®¢ï¼ŒçŸ­æ—¶é—´å†…å‘TinyURLæœåŠ¡å™¨å‘é€å¤§é‡çš„è¯·æ±‚ï¼Œä¼šè¿…é€Ÿè€—å…‰IDï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ")]),t._v(" "),r("p",[t._v("é¦–å…ˆï¼Œé™åˆ¶IPçš„å•æ—¥è¯·æ±‚æ€»æ•°ï¼Œè¶…è¿‡é˜ˆå€¼åˆ™ç›´æ¥æ‹’ç»æœåŠ¡ã€‚")]),t._v(" "),r("p",[t._v("å…‰é™åˆ¶IPçš„è¯·æ±‚æ•°è¿˜ä¸å¤Ÿï¼Œå› ä¸ºé»‘å®¢ä¸€èˆ¬æ‰‹é‡Œæœ‰ä¸Šç™¾ä¸‡å°è‚‰é¸¡çš„ï¼ŒIPåœ°å€å¤§å¤§çš„æœ‰ï¼Œæ‰€ä»¥å…‰é™åˆ¶IPä½œç”¨ä¸å¤§ã€‚")]),t._v(" "),r("p",[t._v("å¯ä»¥ç”¨ä¸€å°Redisä½œä¸ºç¼“å­˜æœåŠ¡å™¨ï¼Œå­˜å‚¨çš„ä¸æ˜¯ ID->é•¿ç½‘å€ï¼Œè€Œæ˜¯ é•¿ç½‘å€->IDï¼Œä»…å­˜å‚¨ä¸€å¤©ä»¥å†…çš„æ•°æ®ï¼Œç”¨LRUæœºåˆ¶è¿›è¡Œæ·˜æ±°ã€‚è¿™æ ·ï¼Œå¦‚æœé»‘å®¢å¤§é‡å‘åŒä¸€ä¸ªé•¿ç½‘å€è¿‡æ¥ï¼Œç›´æ¥ä»ç¼“å­˜æœåŠ¡å™¨é‡Œè¿”å›çŸ­ç½‘å€å³å¯ï¼Œä»–å°±æ— æ³•è€—å…‰æˆ‘ä»¬çš„IDäº†ã€‚")]),t._v(" "),r("h2",{attrs:{id:"å‚è€ƒ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[t._v("#")]),t._v(" å‚è€ƒ")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://soulmachine.gitbooks.io/system-design/content/cn/tinyurl.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("çŸ­é“¾æ¥è®¾è®¡"),r("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=v.exports}}]);