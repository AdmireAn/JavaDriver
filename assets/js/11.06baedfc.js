(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{513:function(t,a,v){"use strict";v.r(a);var r=v(21),_=Object(r.a)({},(function(){var t=this,a=t.$createElement,v=t._self._c||a;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"hashmap-与-concurrenthashmap-的实现原理是怎样的-concurrenthashmap-是如何保证线程安全的"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-与-concurrenthashmap-的实现原理是怎样的-concurrenthashmap-是如何保证线程安全的"}},[t._v("#")]),t._v(" HashMap 与 ConcurrentHashMap 的实现原理是怎样的？ConcurrentHashMap 是如何保证线程安全的？")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th"),t._v(" "),v("th",[t._v("HashMap")]),t._v(" "),v("th",[t._v("ConcurrentHashMap")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("是否线程安全")]),t._v(" "),v("td",[t._v("不安全")]),t._v(" "),v("td",[t._v("安全")])]),t._v(" "),v("tr",[v("td",[t._v("JDK1.7-数据结构")]),t._v(" "),v("td",[t._v("数组+链表")]),t._v(" "),v("td",[t._v("数组+链表+Segment")])]),t._v(" "),v("tr",[v("td",[t._v("JDK1.7-数据结构-图示")]),t._v(" "),v("td",[v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/e6c9d24ely1h0oka5gy6fj20i30k474z.jpg",alt:""}})]),t._v(" "),v("td",[v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/e6c9d24ely1h0ok5zqu9jj20hs0ckmxv.jpg",alt:""}})])]),t._v(" "),v("tr",[v("td",[t._v("锁粒度")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("对segment加锁，最大并发修改线程数=segment数量")])]),t._v(" "),v("tr",[v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("---")])]),t._v(" "),v("tr",[v("td",[t._v("JDK1.8-数据结构")]),t._v(" "),v("td",[t._v("数组+链表+红黑树")]),t._v(" "),v("td",[t._v("数组+链表+红黑树")])]),t._v(" "),v("tr",[v("td",[t._v("JDK1.8-数据结构-图示")]),t._v(" "),v("td",[v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/e6c9d24ely1h0okdbijkkj20un0k6756.jpg",alt:""}})]),t._v(" "),v("td",[v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/e6c9d24ely1h0okdbijkkj20un0k6756.jpg",alt:""}})])]),t._v(" "),v("tr",[v("td",[t._v("锁粒度")]),t._v(" "),v("td",[t._v("---")]),t._v(" "),v("td",[t._v("HashEntry（首节点），最大并发修改线程数=数组.size")])])])]),t._v(" "),v("blockquote",[v("p",[t._v("Q1：ConcurrentHashMap 中变量使用 final 和 volatile 修饰有什么用呢？"),v("br"),t._v("\nA：Final域使得确保初始化安全性（initialization safety）成为可能，初始化安全性让不可变形对象不需要同步就能自由地被访问和共享。"),v("br"),t._v("\nNode的元素val和指针next是用 volatile 修饰的，在多线程环境下线程A修改结点的val或者新增节点的时候是对线程B可见的。"),v("br")])]),t._v(" "),v("blockquote",[v("p",[t._v("Q2：ConcurrentHashMap在JDK 7和8之间的区别"),v("br"),t._v("\nA:去掉了Segment这种数据结构 "),v("br"),t._v("\n增加了红黑树结构来优化链表，解决了长链表遍历慢的问题"),v("br")])])])}),[],!1,null,null,null);a.default=_.exports}}]);